#################################
# Backend & Performance 
#################################
backend = "glx";
vsync = true;
glx-no-stencil = true;
glx-no-rebind-pixmap = true;
xrender-sync-fence = true;
use-damage = true;        # hardware acceleration for better performance

# Uncomment below if you notice flicker:
# use-damage = false;

#################################
# Window Appearance
#################################
corner-radius = 12;        # your original corner radius

# Use your original opacity values
active-opacity = 0.95;     
inactive-opacity = 0.80;   
inactive-dim = 0.05;
inactive-dim-fixed = true;
inactive-opacity-override = false;

detect-rounded-corners = true;

#################################
# Blur (Glass Effect)
#################################
blur-method = "dual_kawase";
blur-strength = 4;          # your original blur strength
blur-background = true;
blur-background-frame = true;
blur-background-fixed = false;

# Exclude only i3lock (like your original script)
blur-background-exclude = [
  "class_g = 'i3lock'"
];

# Force full opacity for i3lock
opacity-rule = [
  "100:class_g = 'i3lock'"
];

#################################
# Shadows (disabled for i3)
#################################
shadow = false;

#################################
# Fading / Transitions
#################################
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 10;
no-fading-openclose = false;

#################################
# Focus Behavior (i3-friendly)
#################################
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;

#################################
# Fullscreen & Video Optimizations
#################################
unredir-if-possible = true;
unredir-if-possible-delay = 200;
unredir-if-possible-exclude = [
  "class_g = 'mpv'",
  "class_g = 'vlc'",
  "window_type = 'fullscreen'"
];

#################################
# Optional Debugging
#################################
# log-level = "warn";
# log-file = "/tmp/picom.log";

